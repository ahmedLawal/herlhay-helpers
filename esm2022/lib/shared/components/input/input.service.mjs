import { Injectable } from '@angular/core';
import * as i0 from "@angular/core";
export class InputService {
    constructor() {
        this.defaultValue = {
            showSeperateLabel: true,
            showValidationMsg: true,
        };
        this.labeller = (field1, field2) => {
            // debugger;
            field1 = field1?.toString()?.trim();
            field2 = field2?.toString()?.trim();
            if (field1 != null && field2 != null)
                return { value: field1, label: field1 + ' - ' + field2 };
            else
                return { value: field1, label: field1 || field2 };
        };
        this.optionsFormatter = (options, valueField, formatter, labelType, labelField, autoPickValueField) => {
            if (!options?.length)
                return [];
            if (formatter)
                return options.map((option) => ({
                    value: valueField && option ? option[valueField] : option,
                    label: formatter(option),
                }));
            if (labelType)
                return options.map((option) => {
                    const formattedOption = this.optionLabellerFunctions[labelType](option);
                    return {
                        value: valueField
                            ? option[valueField]
                            : autoPickValueField
                                ? formattedOption.value
                                : option,
                        label: formattedOption.label,
                    };
                });
            if (labelField)
                return options.map((option) => ({
                    value: valueField ? option[valueField] : option,
                    label: option[labelField],
                }));
            return options.map((option) => ({ value: option, label: option }));
        };
        const labeller = this.labeller;
        this.optionLabellerFunctions = {
            bnk: (option) => labeller(option?.accountName +
                '  |  ' +
                option?.accountNo +
                '  |  ' +
                option?.bankName +
                '  |  ' +
                option?.no, null),
            ccd: (option) => labeller(option?.companyCode, option?.description),
            cd: (option) => labeller(option?.code, option?.description),
            cdt: (option) => labeller(option?.code, option?.description || option?.title),
            cf: (option) => labeller(option?.code, option?.fullName),
            cmd: (option) => labeller(option?.company, option?.description),
            cn: (option) => labeller(option?.code, option?.name),
            ct: (option) => labeller(option?.code, option?.title),
            gd: (option) => labeller(option?.group, option?.description),
            ha: (option) => labeller(option?.hierAgentNo, option?.agentName),
            id: (option) => labeller(option?.id, option?.description),
            if: (option) => labeller(option?.id, option?.fullName),
            ifl: (option) => labeller(option?.userId, `${option?.firstName} ${option?.lastName}`),
            it: (option) => labeller(option?.id, option?.title),
            md: (option) => labeller(option?.mktEventCode, option?.description),
            pd: (option) => labeller(option?.payoutMethod, option?.description),
            nf: (option) => labeller(option?.no, option?.fullName),
            td: (option) => labeller(option?.type, option?.description),
            ud: (option) => labeller(option?.userMenu, option?.description),
            uf: (option) => labeller(option?.userName, option?.fullName),
            vl: (option) => labeller(null, option?.label),
            vv: (option) => labeller(option?.versionNo, option?.versionDate),
        };
    }
    trackByValue(index, item) {
        return item.value;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.0.2", ngImport: i0, type: InputService, deps: [], target: i0.ɵɵFactoryTarget.Injectable }); }
    static { this.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "16.0.2", ngImport: i0, type: InputService, providedIn: 'root' }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.0.2", ngImport: i0, type: InputService, decorators: [{
            type: Injectable,
            args: [{
                    providedIn: 'root',
                }]
        }], ctorParameters: function () { return []; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5wdXQuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2hlcmxoYXktaGVscGVycy9zcmMvbGliL3NoYXJlZC9jb21wb25lbnRzL2lucHV0L2lucHV0LnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQzs7QUFPM0MsTUFBTSxPQUFPLFlBQVk7SUFTdkI7UUFSUyxpQkFBWSxHQUFHO1lBQ3RCLGlCQUFpQixFQUFFLElBQUk7WUFDdkIsaUJBQWlCLEVBQUUsSUFBSTtTQUN4QixDQUFDO1FBMENGLGFBQVEsR0FBRyxDQUFDLE1BQWMsRUFBRSxNQUFjLEVBQUUsRUFBRTtZQUM1QyxZQUFZO1lBQ1osTUFBTSxHQUFHLE1BQU0sRUFBRSxRQUFRLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQztZQUNwQyxNQUFNLEdBQUcsTUFBTSxFQUFFLFFBQVEsRUFBRSxFQUFFLElBQUksRUFBRSxDQUFDO1lBQ3BDLElBQUksTUFBTSxJQUFJLElBQUksSUFBSSxNQUFNLElBQUksSUFBSTtnQkFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsTUFBTSxHQUFHLEtBQUssR0FBRyxNQUFNLEVBQUUsQ0FBQzs7Z0JBQzFGLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxNQUFNLElBQUksTUFBTSxFQUFFLENBQUM7UUFDekQsQ0FBQyxDQUFDO1FBQ0YscUJBQWdCLEdBQUcsQ0FDakIsT0FBYyxFQUNkLFVBQW1CLEVBQ25CLFNBQVUsRUFDVixTQUEyQixFQUMzQixVQUFtQixFQUNuQixrQkFBNEIsRUFDNUIsRUFBRTtZQUNGLElBQUksQ0FBQyxPQUFPLEVBQUUsTUFBTTtnQkFBRSxPQUFPLEVBQUUsQ0FBQztZQUNoQyxJQUFJLFNBQVM7Z0JBQ1gsT0FBTyxPQUFPLENBQUMsR0FB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RUFBRSxDQUFDLE1BQVcsRUFBRSxFQUFFLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFdBQVcsQ0FBQztZQUNqRSxFQUFFLEVBQUUsQ0FBQyxNQUFXLEVBQUUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUUsV0FBVyxFQUFFLE1BQU0sRUFBRSxTQUFTLENBQUM7WUFDckUsRUFBRSxFQUFFLENBQUMsTUFBVyxFQUFFLEVBQUUsQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsV0FBVyxDQUFDO1lBQzlELEVBQUUsRUFBRSxDQUFDLE1BQVcsRUFBRSxFQUFFLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLFFBQVEsQ0FBQztZQUMzRCxHQUFHLEVBQUUsQ0FBQyxNQUFXLEVBQUUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLEdBQUcsTUFBTSxFQUFFLFNBQVMsSUFBSSxNQUFNLEVBQUUsUUFBUSxFQUFFLENBQUM7WUFDMUYsRUFBRSxFQUFFLENBQUMsTUFBVyxFQUFFLEVBQUUsQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsS0FBSyxDQUFDO1lBQ3hELEVBQUUsRUFBRSxDQUFDLE1BQVcsRUFBRSxFQUFFLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxZQUFZLEVBQUUsTUFBTSxFQUFFLFdBQVcsQ0FBQztZQUN4RSxFQUFFLEVBQUUsQ0FBQyxNQUFXLEVBQUUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUUsWUFBWSxFQUFFLE1BQU0sRUFBRSxXQUFXLENBQUM7WUFDeEUsRUFBRSxFQUFFLENBQUMsTUFBVyxFQUFFLEVBQUUsQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsUUFBUSxDQUFDO1lBQzNELEVBQUUsRUFBRSxDQUFDLE1BQVcsRUFBRSxFQUFFLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLFdBQVcsQ0FBQztZQUNoRSxFQUFFLEVBQUUsQ0FBQyxNQUFXLEVBQUUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxXQUFXLENBQUM7WUFDcEUsRUFBRSxFQUFFLENBQUMsTUFBVyxFQUFFLEVBQUUsQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsUUFBUSxDQUFDO1lBQ2pFLEVBQUUsRUFBRSxDQUFDLE1BQVcsRUFBRSxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsS0FBSyxDQUFDO1lBQ2xELEVBQUUsRUFBRSxDQUFDLE1BQVcsRUFBRSxFQUFFLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLFdBQVcsQ0FBQztTQUN0RSxDQUFDO0lBQ0osQ0FBQztJQTJDRCxZQUFZLENBQUMsS0FBSyxFQUFFLElBQWE7UUFDL0IsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ3BCLENBQUM7OEdBMUZVLFlBQVk7a0hBQVosWUFBWSxjQUZYLE1BQU07OzJGQUVQLFlBQVk7a0JBSHhCLFVBQVU7bUJBQUM7b0JBQ1YsVUFBVSxFQUFFLE1BQU07aUJBQ25CIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSUNvZGVUaXRsZSB9IGZyb20gJy4uLy4uL21vZGVscy9pbmRleC5tb2RlbCc7XG5pbXBvcnQgeyBJT3B0aW9uLCBPcHRpb25MYWJlbFR5cGUgfSBmcm9tICcuL2lucHV0LmNvbXBvbmVudCc7XG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnLFxufSlcbmV4cG9ydCBjbGFzcyBJbnB1dFNlcnZpY2Uge1xuICByZWFkb25seSBkZWZhdWx0VmFsdWUgPSB7XG4gICAgc2hvd1NlcGVyYXRlTGFiZWw6IHRydWUsXG4gICAgc2hvd1ZhbGlkYXRpb25Nc2c6IHRydWUsXG4gIH07XG5cbiAgcmVhZG9ubHkgb3B0aW9uTGFiZWxsZXJGdW5jdGlvbnM6IHtcbiAgICBbeDogc3RyaW5nXTogKG9wdGlvbikgPT4geyBsYWJlbDogc3RyaW5nOyB2YWx1ZTogc3RyaW5nIH07XG4gIH07XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGNvbnN0IGxhYmVsbGVyID0gdGhpcy5sYWJlbGxlcjtcbiAgICB0aGlzLm9wdGlvbkxhYmVsbGVyRnVuY3Rpb25zID0ge1xuICAgICAgYm5rOiAob3B0aW9uOiBhbnkpID0+XG4gICAgICAgIGxhYmVsbGVyKFxuICAgICAgICAgIG9wdGlvbj8uYWNjb3VudE5hbWUgK1xuICAgICAgICAgICAgJyAgfCAgJyArXG4gICAgICAgICAgICBvcHRpb24/LmFjY291bnRObyArXG4gICAgICAgICAgICAnICB8ICAnICtcbiAgICAgICAgICAgIG9wdGlvbj8uYmFua05hbWUgK1xuICAgICAgICAgICAgJyAgfCAgJyArXG4gICAgICAgICAgICBvcHRpb24/Lm5vLFxuICAgICAgICAgIG51bGxcbiAgICAgICAgKSxcbiAgICAgIGNjZDogKG9wdGlvbjogYW55KSA9PiBsYWJlbGxlcihvcHRpb24/LmNvbXBhbnlDb2RlLCBvcHRpb24/LmRlc2NyaXB0aW9uKSxcbiAgICAgIGNkOiAob3B0aW9uOiBhbnkpID0+IGxhYmVsbGVyKG9wdGlvbj8uY29kZSwgb3B0aW9uPy5kZXNjcmlwdGlvbiksXG4gICAgICBjZHQ6IChvcHRpb246IGFueSkgPT4gbGFiZWxsZXIob3B0aW9uPy5jb2RlLCBvcHRpb24/LmRlc2NyaXB0aW9uIHx8IG9wdGlvbj8udGl0bGUpLFxuICAgICAgY2Y6IChvcHRpb246IGFueSkgPT4gbGFiZWxsZXIob3B0aW9uPy5jb2RlLCBvcHRpb24/LmZ1bGxOYW1lKSxcbiAgICAgIGNtZDogKG9wdGlvbjogYW55KSA9PiBsYWJlbGxlcihvcHRpb24/LmNvbXBhbnksIG9wdGlvbj8uZGVzY3JpcHRpb24pLFxuICAgICAgY246IChvcHRpb246IGFueSkgPT4gbGFiZWxsZXIob3B0aW9uPy5jb2RlLCBvcHRpb24/Lm5hbWUpLFxuICAgICAgY3Q6IChvcHRpb246IElDb2RlVGl0bGUpID0+IGxhYmVsbGVyKG9wdGlvbj8uY29kZSwgb3B0aW9uPy50aXRsZSksXG4gICAgICBnZDogKG9wdGlvbjogYW55KSA9PiBsYWJlbGxlcihvcHRpb24/Lmdyb3VwLCBvcHRpb24/LmRlc2NyaXB0aW9uKSxcbiAgICAgIGhhOiAob3B0aW9uOiBhbnkpID0+IGxhYmVsbGVyKG9wdGlvbj8uaGllckFnZW50Tm8sIG9wdGlvbj8uYWdlbnROYW1lKSxcbiAgICAgIGlkOiAob3B0aW9uOiBhbnkpID0+IGxhYmVsbGVyKG9wdGlvbj8uaWQsIG9wdGlvbj8uZGVzY3JpcHRpb24pLFxuICAgICAgaWY6IChvcHRpb246IGFueSkgPT4gbGFiZWxsZXIob3B0aW9uPy5pZCwgb3B0aW9uPy5mdWxsTmFtZSksXG4gICAgICBpZmw6IChvcHRpb246IGFueSkgPT4gbGFiZWxsZXIob3B0aW9uPy51c2VySWQsIGAke29wdGlvbj8uZmlyc3ROYW1lfSAke29wdGlvbj8ubGFzdE5hbWV9YCksXG4gICAgICBpdDogKG9wdGlvbjogYW55KSA9PiBsYWJlbGxlcihvcHRpb24/LmlkLCBvcHRpb24/LnRpdGxlKSxcbiAgICAgIG1kOiAob3B0aW9uOiBhbnkpID0+IGxhYmVsbGVyKG9wdGlvbj8ubWt0RXZlbnRDb2RlLCBvcHRpb24/LmRlc2NyaXB0aW9uKSxcbiAgICAgIHBkOiAob3B0aW9uOiBhbnkpID0+IGxhYmVsbGVyKG9wdGlvbj8ucGF5b3V0TWV0aG9kLCBvcHRpb24/LmRlc2NyaXB0aW9uKSxcbiAgICAgIG5mOiAob3B0aW9uOiBhbnkpID0+IGxhYmVsbGVyKG9wdGlvbj8ubm8sIG9wdGlvbj8uZnVsbE5hbWUpLFxuICAgICAgdGQ6IChvcHRpb246IGFueSkgPT4gbGFiZWxsZXIob3B0aW9uPy50eXBlLCBvcHRpb24/LmRlc2NyaXB0aW9uKSxcbiAgICAgIHVkOiAob3B0aW9uOiBhbnkpID0+IGxhYmVsbGVyKG9wdGlvbj8udXNlck1lbnUsIG9wdGlvbj8uZGVzY3JpcHRpb24pLFxuICAgICAgdWY6IChvcHRpb246IGFueSkgPT4gbGFiZWxsZXIob3B0aW9uPy51c2VyTmFtZSwgb3B0aW9uPy5mdWxsTmFtZSksXG4gICAgICB2bDogKG9wdGlvbjogYW55KSA9PiBsYWJlbGxlcihudWxsLCBvcHRpb24/LmxhYmVsKSxcbiAgICAgIHZ2OiAob3B0aW9uOiBhbnkpID0+IGxhYmVsbGVyKG9wdGlvbj8udmVyc2lvbk5vLCBvcHRpb24/LnZlcnNpb25EYXRlKSxcbiAgICB9O1xuICB9XG4gIGxhYmVsbGVyID0gKGZpZWxkMTogc3RyaW5nLCBmaWVsZDI6IHN0cmluZykgPT4ge1xuICAgIC8vIGRlYnVnZ2VyO1xuICAgIGZpZWxkMSA9IGZpZWxkMT8udG9TdHJpbmcoKT8udHJpbSgpO1xuICAgIGZpZWxkMiA9IGZpZWxkMj8udG9TdHJpbmcoKT8udHJpbSgpO1xuICAgIGlmIChmaWVsZDEgIT0gbnVsbCAmJiBmaWVsZDIgIT0gbnVsbCkgcmV0dXJuIHsgdmFsdWU6IGZpZWxkMSwgbGFiZWw6IGZpZWxkMSArICcgLSAnICsgZmllbGQyIH07XG4gICAgZWxzZSByZXR1cm4geyB2YWx1ZTogZmllbGQxLCBsYWJlbDogZmllbGQxIHx8IGZpZWxkMiB9O1xuICB9O1xuICBvcHRpb25zRm9ybWF0dGVyID0gKFxuICAgIG9wdGlvbnM6IGFueVtdLFxuICAgIHZhbHVlRmllbGQ/OiBzdHJpbmcsXG4gICAgZm9ybWF0dGVyPyxcbiAgICBsYWJlbFR5cGU/OiBPcHRpb25MYWJlbFR5cGUsXG4gICAgbGFiZWxGaWVsZD86IHN0cmluZyxcbiAgICBhdXRvUGlja1ZhbHVlRmllbGQ/OiBib29sZWFuXG4gICkgPT4ge1xuICAgIGlmICghb3B0aW9ucz8ubGVuZ3RoKSByZXR1cm4gW107XG4gICAgaWYgKGZvcm1hdHRlcilcbiAgICAgIHJldHVybiBvcHRpb25zLm1hcCgob3B0aW9uKSA9PiAoe1xuICAgICAgICB2YWx1ZTogdmFsdWVGaWVsZCAmJiBvcHRpb24gPyBvcHRpb25bdmFsdWVGaWVsZF0gOiBvcHRpb24sXG4gICAgICAgIGxhYmVsOiBmb3JtYXR0ZXIob3B0aW9uKSxcbiAgICAgIH0pKTtcbiAgICBpZiAobGFiZWxUeXBlKVxuICAgICAgcmV0dXJuIG9wdGlvbnMubWFwKChvcHRpb24pID0+IHtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVkT3B0aW9uID0gdGhpcy5vcHRpb25MYWJlbGxlckZ1bmN0aW9uc1tsYWJlbFR5cGVdKG9wdGlvbik7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2YWx1ZTogdmFsdWVGaWVsZFxuICAgICAgICAgICAgPyBvcHRpb25bdmFsdWVGaWVsZF1cbiAgICAgICAgICAgIDogYXV0b1BpY2tWYWx1ZUZpZWxkXG4gICAgICAgICAgICA/IGZvcm1hdHRlZE9wdGlvbi52YWx1ZVxuICAgICAgICAgICAgOiBvcHRpb24sXG4gICAgICAgICAgbGFiZWw6IGZvcm1hdHRlZE9wdGlvbi5sYWJlbCxcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIGlmIChsYWJlbEZpZWxkKVxuICAgICAgcmV0dXJuIG9wdGlvbnMubWFwKChvcHRpb24pID0+ICh7XG4gICAgICAgIHZhbHVlOiB2YWx1ZUZpZWxkID8gb3B0aW9uW3ZhbHVlRmllbGRdIDogb3B0aW9uLFxuICAgICAgICBsYWJlbDogb3B0aW9uW2xhYmVsRmllbGRdLFxuICAgICAgfSkpO1xuICAgIHJldHVybiBvcHRpb25zLm1hcCgob3B0aW9uKSA9PiAoeyB2YWx1ZTogb3B0aW9uLCBsYWJlbDogb3B0aW9uIH0pKTtcbiAgfTtcblxuICB0cmFja0J5VmFsdWUoaW5kZXgsIGl0ZW06IElPcHRpb24pIHtcbiAgICByZXR1cm4gaXRlbS52YWx1ZTtcbiAgfVxufVxuIl19